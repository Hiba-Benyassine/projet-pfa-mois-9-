<div class="user-form">
	<h2>{{ editingUserEmail ? 'Modifier un utilisateur' : 'Ajouter un utilisateur' }}</h2>
	<ng-container *ngIf="isAdmin; else notAllowed">
		<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
			<div class="form-group">
				<label>Nom complet</label>
				<input type="text" formControlName="fullName" placeholder="Nom complet" />
				<div *ngIf="userForm.get('fullName')?.invalid && userForm.get('fullName')?.touched" class="error">
					Le nom complet est requis
				</div>
			</div>
			<div class="form-group">
				<label>Email</label>
				<input type="email" formControlName="email" placeholder="Email" />
				<div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="error">
					Email invalide
				</div>
			</div>
			<div class="form-group">
				<label>Mot de passe</label>
				<input type="password" formControlName="password" placeholder="Mot de passe (min 6 caractères)" />
				<div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="error">
					Mot de passe requis (min 6 caractères)
				</div>
			</div>
			<div class="form-group">
				<label>Rôle</label>
				<select formControlName="role">
					<option value="employee">Employé</option>
					<option value="admin">Admin</option>
				</select>
			</div>
			<div class="form-actions">
				<button type="submit" class="btn-primary" [disabled]="userForm.invalid">{{ editingUserEmail ? 'Modifier' : 'Ajouter' }}</button>
			<button type="button" class="btn-secondary" (click)="onCancel()">Annuler</button>
			</div>
		</form>
	</ng-container>
	<ng-template #notAllowed>
		<div class="access-denied">Accès refusé : seuls les administrateurs peuvent modifier un utilisateur.</div>
	</ng-template>
</div>
